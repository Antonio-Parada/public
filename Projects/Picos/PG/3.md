# PICOS Progress Report 03: Networking & Virtual Bridge
**Status:** Establishing Linux Bridge (vmbr0/vmbr1) / Fixing Driver State
**Date:** 2025-12-17

## 1. Executive Summary of Deviations
* **Manual vs. Managed:** We shifted from manually launching `hostapd` (the cause of previous lockouts) to integrating the Wi-Fi card into the Proxmox Network configuration.
* **Bridge Architecture:** We moved from a single bridge attempt to a dual-bridge concept: one for the host's internet and one for the virtual "TV" network.
* **Bypassing the "Busy" Error:** By using the Proxmox kernel's native handling, we successfully released the `wlp1s0` interface from its "Station" lock.

## 2. Infrastructure & Packages Installed
* **Core Bridge Utils:** `bridge-utils` (for managing `vmbr` interfaces).
* **Network Manager Removal:** Purged `NetworkManager` to ensure Proxmox's `ifupdown2` has total control over the hardware.
* **Proxmox Meta-Package:** `proxmox-ve` fully installed and verified via `pveversion`.

## 3. Step-by-Step Reflection
| Step | Action Taken | Result |
| :--- | :--- | :--- |
| **3.1** | Interface Identification | Re-mapped `wlp1s0` (Wi-Fi) and `enp...` (Ethernet) to ensure no `1` vs `l` confusion in scripts. |
| **3.2** | Bridge Creation (vmbr0) | Defined the primary bridge in `/etc/network/interfaces`. This allows VMs to share the laptop's connection. |
| **3.3** | hostapd Integration | Successfully linked `hostapd` to the bridge, allowing the Wi-Fi card to broadcast while staying connected to the internal bridge. |
| **3.4** | DHCP/DNS Setup | Configured `dnsmasq` to listen only on the virtual bridge, preventing IP conflicts with the home router (`Omarcus`). |
| **3.5** | IP Forwarding | Enabled `net.ipv4.ip_forward=1` in sysctl to allow traffic to flow from the iPhone/Wi-Fi to the virtual machines. |

## 4. Current Blockers
* **Interface Naming Persistence:** Debian occasionally renames wireless interfaces after a kernel swap (e.g., `wlan0` vs `wlp1s0`), requiring manual verification.
* **Firewall Logic:** Proxmox's default firewall (pve-firewall) may block SSH traffic on the new bridge until explicitly allowed.

## 5. Next Immediate Action
Connect Laptop 2 to the newly stabilized `Proxmox_Station` Wi-Fi and access the Proxmox Web UI at `https://10.10.20.1:8006`.
